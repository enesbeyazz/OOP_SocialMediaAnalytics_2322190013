{% extends "base.html" %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-6">
        <div class="card shadow">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0">Yeni Post PaylaÅŸ</h5>
            </div>
            <div class="card-body">
                <form action="/add_post" method="POST" enctype="multipart/form-data">
                    
                    <div class="mb-3">
                        <label class="form-label fw-bold">Hangi Hesap?</label>
                        <select name="account_id" class="form-select">
                            {% for acc in accounts %}
                            <option value="{{ acc.id }}">{{ acc.username }} ({{ acc.platform }})</option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="mb-3">
                        <label class="form-label fw-bold">Platform</label>
                        <input type="text" name="platform" class="form-control" value="Instagram">
                    </div>

                    <div class="mb-3">
                        <label class="form-label fw-bold">Post Tipi</label>
                        <select name="type" class="form-select" id="postType">
                            <option value="text">Sadece YazÄ±</option>
                            <option value="image">Resim (Dosya veya Link)</option>
                            <option value="video">Video (Dosya veya Link)</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label class="form-label fw-bold">AÃ§Ä±klama / Metin</label>
                        <textarea name="content" class="form-control" rows="3" required placeholder="Ne dÃ¼ÅŸÃ¼nÃ¼yorsun?"></textarea>
                    </div>

                    <div id="imageField" style="display:none;" class="p-3 mb-3 border rounded bg-light">
                        <label class="fw-bold text-primary mb-2">ðŸ“· Resim Ekleme SeÃ§enekleri</label>
                        
                        <div class="mb-3">
                            <label class="small text-muted">SeÃ§enek 1: Bilgisayardan YÃ¼kle</label>
                            <input type="file" name="image_file" class="form-control" accept="image/*">
                        </div>
                        
                        <div class="text-center fw-bold text-muted my-1">- VEYA -</div>
                        
                        <div class="mb-1">
                            <label class="small text-muted">SeÃ§enek 2: Ä°nternet Linki (URL) YapÄ±ÅŸtÄ±r</label>
                            <input type="text" name="image_url" class="form-control" placeholder="https://ornek.com/resim.jpg">
                        </div>
                    </div>

                    <div id="videoField" style="display:none;" class="p-3 mb-3 border rounded bg-light">
                        <label class="fw-bold text-danger mb-2">ðŸŽ¥ Video Ekleme SeÃ§enekleri</label>
                        
                        <div class="mb-3">
                            <label class="small text-muted">SeÃ§enek 1: Bilgisayardan YÃ¼kle</label>
                            <input type="file" name="video_file" class="form-control" accept="video/*">
                        </div>

                        <div class="text-center fw-bold text-muted my-1">- VEYA -</div>
                        
                        <div class="mb-1">
                            <label class="small text-muted">SeÃ§enek 2: Ä°nternet Linki (URL) YapÄ±ÅŸtÄ±r</label>
                            <input type="text" name="video_url" class="form-control" placeholder="https://ornek.com/video.mp4">
                        </div>
                    </div>

                    <button type="submit" class="btn btn-success w-100 py-2">PaylaÅŸ</button>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    document.getElementById('postType').addEventListener('change', function() {
        var val = this.value;
        var imgField = document.getElementById('imageField');
        var vidField = document.getElementById('videoField');

        // Ã–nce hepsini gizle
        imgField.style.display = 'none';
        vidField.style.display = 'none';

        // SeÃ§ime gÃ¶re aÃ§
        if (val === 'image') {
            imgField.style.display = 'block';
        } else if (val === 'video') {
            vidField.style.display = 'block';
        }
    });
</script>
{% endblock %}